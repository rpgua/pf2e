---
import { getSpeed } from "@lib/helpers";
import BasePage from "@components/pages/BasePage.astro";
import type { CollectionEntry } from "astro:content";
import type { Ancestry } from "../../../types";
import { useTranslations } from "@i18n/utils";
import DisplayInfoList from "@components/pages/DisplayInfoList.astro";
import type { DisplayInfoProps } from "@components/pages/DisplayInfo.astro";

const t = useTranslations();

interface Props {
    item: CollectionEntry<"ancestry">;
}
const { item } = Astro.props;
const ancestry: Ancestry = item.data;

const {
    hp,
    size,
    speed,
    attribute_boosts,
    attribute_flaw,
    languages,
    additional_languages,
    vision,
    additional_mechanics,
} = ancestry;

const mechanics: DisplayInfoProps[] = [
    { title: t("ancestry.hp"), content: hp },
    { title: t("ancestry.size"), content: size },
    {
        title: t("ancestry.speed"),
        content: speed && speed,
        type: "speed",
    },
    {
        title: t("ancestry.attribute_boosts"),
        content: attribute_boosts.join(", "),
    },
    { title: t("ancestry.attribute_flaw"), content: attribute_flaw.join(", ") },
    { title: t("ancestry.languages"), content: languages.join(", ") },
    {
        title: t("ancestry.additional_languages"),
        content: additional_languages,
    },
    { title: t("ancestry.vision"), content: vision },
    {
        title: t("ancestry.additional_mechanics"),
        content: additional_mechanics,
    },
];
---

<BasePage item={ancestry}>
    <Fragment slot="before-content">
        <DisplayInfoList items={mechanics} />
    </Fragment>
</BasePage>
